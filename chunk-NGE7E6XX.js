import{a as z}from"./chunk-SV52D26Y.js";import{a as F}from"./chunk-C32IP4OQ.js";import{b as D,e as A}from"./chunk-J47F7UII.js";import{$a as n,Aa as h,Ab as V,Ea as g,Ma as l,N as v,Na as t,Oa as e,Pa as E,S as f,T as u,Ta as S,Ua as x,Va as m,Za as b,_a as C,ab as d,ba as O,bb as p,gb as _,hb as M,ib as I,kb as P,pa as o,vb as k,wb as w,xb as y,yb as R,zb as T}from"./chunk-UZHONRYK.js";function j(r,a){if(r&1&&(t(0,"tr")(1,"td"),n(2),e(),t(3,"td"),n(4),e(),t(5,"td"),n(6),e(),t(7,"td"),n(8),e(),t(9,"td"),n(10),e(),t(11,"td"),n(12),e(),t(13,"td"),n(14),e(),t(15,"td",21),n(16),e(),t(17,"td"),n(18),e()()),r&2){let i=a.$implicit;o(2),d(i.question),o(2),d(i.informationRequired),o(2),d(i.sourceOfInformation),o(2),d(i.procedure),o(2),d(i.procedureDetail),o(2),d(i.objects),o(2),d(i.responsibleMember),o(2),d(i.period),o(2),d(i.possibleFindings)}}function B(r,a){if(r&1&&(t(0,"div",14)(1,"h3",15),n(2,"Matriz de Planejamento Detalhada"),e(),t(3,"table",16)(4,"thead")(5,"tr")(6,"th",17),n(7,"Quest\xE3o de Auditoria"),e(),t(8,"th",18),n(9,"Info. Requerida"),e(),t(10,"th",18),n(11,"Fontes de Info."),e(),t(12,"th",18),n(13,"Procedimento"),e(),t(14,"th",17),n(15,"Detalhamento"),e(),t(16,"th",18),n(17,"Objetos"),e(),t(18,"th",18),n(19,"Respons\xE1vel"),e(),t(20,"th",19),n(21,"Per\xEDodo"),e(),t(22,"th",17),n(23,"Poss\xEDveis Achados"),e()()(),t(24,"tbody"),g(25,j,19,9,"tr",20),e()()()),r&2){let i=m().ngIf;o(25),l("ngForOf",i.planningMatrix)}}function L(r,a){if(r&1&&(t(0,"div",30)(1,"small"),n(2),e()()),r&2){let i=m().$implicit;o(2),p("Proc: ",i.process)}}function q(r,a){if(r&1&&(t(0,"tr")(1,"td",21)(2,"strong"),n(3),e()(),t(4,"td"),n(5),g(6,L,3,1,"div",26),e(),t(7,"td",27),n(8),_(9,"titlecase"),E(10,"br"),t(11,"small"),n(12),e()(),t(13,"td"),n(14),e(),t(15,"td",21),n(16),_(17,"titlecase"),e(),t(18,"td",27),n(19),_(20,"titlecase"),e(),t(21,"td",28),n(22),t(23,"div",29),n(24),e()()()),r&2){let i=a.$implicit;o(3),d(i.reference),o(2),p(" ",i.event," "),o(),l("ngIf",i.process),o(),C(i.inherentRiskLevel),o(),p(" ",M(9,16,i.inherentRiskLevel)," "),o(4),p("Prob: ",i.probability),o(2),d(i.controlsIdentified||"N\xE3o identificado"),o(2),d(M(17,18,i.controlEffectiveness)),o(2),C(i.residualRiskLevel),o(),p(" ",M(20,20,i.residualRiskLevel)," "),o(3),p(" ",i.auditQuestion," "),o(),b("included",i.includeInMatrix==="Sim"),o(),p(" Escopo: ",i.includeInMatrix," ")}}function $(r,a){r&1&&(t(0,"tr")(1,"td",31),n(2,"Nenhum risco registrado."),e()())}function Q(r,a){if(r&1&&(t(0,"div",14)(1,"h3",15),n(2,"Matriz de Defini\xE7\xE3o de Escopo e Riscos (Detalhada)"),e(),t(3,"table",22)(4,"thead")(5,"tr")(6,"th",19),n(7,"Ref"),e(),t(8,"th",23),n(9,"Evento de Risco"),e(),t(10,"th",18),n(11,"Risco Inerente"),e(),t(12,"th",23),n(13,"Controles Identificados"),e(),t(14,"th",18),n(15,"Efic\xE1cia"),e(),t(16,"th",18),n(17,"Risco Residual"),e(),t(18,"th",24),n(19,"Quest\xE3o de Auditoria (Link)"),e()()(),t(20,"tbody"),g(21,q,25,22,"tr",20)(22,$,3,0,"tr",25),e()()()),r&2){let i=m().ngIf;o(21),l("ngForOf",i.risks),o(),l("ngIf",!(i.risks!=null&&i.risks.length))}}function G(r,a){if(r&1&&(t(0,"div",34)(1,"div",35)(2,"span",36),n(3,"Achado"),e(),t(4,"h4"),n(5),e(),t(6,"span",37),n(7),e()(),t(8,"div",38)(9,"div",39)(10,"strong"),n(11,"Situa\xE7\xE3o Encontrada:"),e(),t(12,"p"),n(13),e()(),t(14,"div",40)(15,"strong"),n(16,"Objetos:"),e(),t(17,"p"),n(18),e()(),t(19,"div",40)(20,"strong"),n(21,"Crit\xE9rio:"),e(),t(22,"p"),n(23),e()(),t(24,"div",40)(25,"strong"),n(26,"Evid\xEAncia:"),e(),t(27,"p"),n(28),e()(),t(29,"div",40)(30,"strong"),n(31,"Causa:"),e(),t(32,"p"),n(33),e()(),t(34,"div",40)(35,"strong"),n(36,"Efeito:"),e(),t(37,"p"),n(38),e()(),t(39,"div",41)(40,"strong"),n(41,"Proposta de Encaminhamento:"),e(),t(42,"p"),n(43),e()()()()),r&2){let i=a.$implicit;o(5),d(i.title),o(),C(i.severity),o(),d(i.severity),o(6),d(i.description),o(5),d(i.objects),o(5),d(i.criteria),o(5),d(i.evidence),o(5),d(i.cause),o(5),d(i.effect),o(5),d(i.recommendation)}}function U(r,a){r&1&&(t(0,"div",42),n(1,"Nenhum achado registrado."),e())}function H(r,a){if(r&1&&(t(0,"div",14)(1,"h3",15),n(2,"Matriz de Achados"),e(),g(3,G,44,11,"div",32)(4,U,2,0,"div",33),e()),r&2){let i=m(2);o(3),l("ngForOf",i.findings()),o(),l("ngIf",i.findings().length===0)}}function J(r,a){if(r&1&&(t(0,"tr")(1,"td"),n(2),e(),t(3,"td"),n(4),e()()),r&2){let i=a.$implicit;o(2),d(i.name),o(2),d(i.email)}}function K(r,a){if(r&1&&(t(0,"div",43)(1,"h3",15),n(2,"Equipe de Auditoria Respons\xE1vel"),e(),t(3,"div",44)(4,"p",45)(5,"strong"),n(6),e()(),t(7,"table",46)(8,"thead")(9,"tr")(10,"th",47),n(11,"Nome do Auditor"),e(),t(12,"th",47),n(13,"E-mail Institucional"),e()()(),t(14,"tbody"),g(15,J,5,2,"tr",20),e()()()()),r&2){let i=a.ngIf;o(6),p("Equipe: ",i.title),o(9),l("ngForOf",i.members)}}function W(r,a){if(r&1){let i=S();t(0,"div",1)(1,"div",2)(2,"a",3),n(3,"\u2190 Voltar"),e(),t(4,"div",4)(5,"div",5)(6,"button",6),x("click",function(){f(i);let s=m();return u(s.setActiveTab("programa"))}),n(7,"Programa de Auditoria"),e(),t(8,"button",6),x("click",function(){f(i);let s=m();return u(s.setActiveTab("riscos"))}),n(9,"Matriz de Riscos"),e(),t(10,"button",6),x("click",function(){f(i);let s=m();return u(s.setActiveTab("achados"))}),n(11,"Matriz de Achados"),e()(),t(12,"button",7),x("click",function(){f(i);let s=m();return u(s.printReport())}),n(13,"\u{1F5A8}\uFE0F Imprimir PDF"),e()()(),t(14,"div",8)(15,"div",9)(16,"h2"),n(17),e(),t(18,"h1"),n(19),e(),t(20,"div",10)(21,"span")(22,"strong"),n(23,"C\xF3digo:"),e(),n(24),e(),t(25,"span")(26,"strong"),n(27,"Data:"),e(),n(28),_(29,"date"),e(),t(30,"span")(31,"strong"),n(32,"Status:"),e(),n(33),e()()(),g(34,B,26,1,"div",11)(35,Q,23,2,"div",11)(36,H,5,2,"div",11)(37,K,16,2,"div",12),t(38,"div",13)(39,"p"),n(40),_(41,"uppercase"),e()()()()}if(r&2){let i=a.ngIf,c=m();o(6),b("active",c.activeTab()==="programa"),o(2),b("active",c.activeTab()==="riscos"),o(2),b("active",c.activeTab()==="achados"),o(7),d(i.department),o(2),d(i.title),o(5),p(" ",i.code),o(4),p(" ",I(29,16,i.startDate,"dd/MM/yyyy")),o(5),p(" ",i.status),o(),l("ngIf",c.activeTab()==="programa"),o(),l("ngIf",c.activeTab()==="riscos"),o(),l("ngIf",c.activeTab()==="achados"),o(),l("ngIf",c.team()),o(3),p("Gerado pelo Simulador de Auditoria P\xFAblica - ",M(41,19,c.activeTab()))}}var N=class r{route=v(D);auditService=v(z);teamService=v(F);activeTab=O("programa");auditId=O("");audit=P(()=>{let a=this.auditId();return a?this.auditService.getAuditById(a)():void 0});team=P(()=>{let a=this.audit();if(a?.teamId)return this.teamService.getTeamById(a.teamId)()});findings=P(()=>{let a=this.auditId();return a?this.auditService.getFindingsByAuditId(a)():[]});constructor(){this.route.parent?.paramMap.subscribe(a=>{let i=a.get("id");i&&this.auditId.set(i)}),this.route.paramMap.subscribe(a=>{let i=a.get("id");i&&this.auditId.set(i)})}setActiveTab(a){this.activeTab.set(a)}printReport(){window.print()}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=h({type:r,selectors:[["app-report-viewer"]],decls:1,vars:1,consts:[["class","report-container",4,"ngIf"],[1,"report-container"],[1,"screen-controls"],["routerLink","/audits",1,"back-link"],[1,"report-actions"],[1,"report-tabs"],[3,"click"],[1,"btn-print",3,"click"],[1,"document-page","landscape"],[1,"doc-header"],[1,"meta"],["class","report-section",4,"ngIf"],["class","report-section team-relation",4,"ngIf"],[1,"doc-footer"],[1,"report-section"],[1,"section-title"],[1,"report-table","dense"],[2,"width","15%"],[2,"width","10%"],[2,"width","5%"],[4,"ngFor","ngForOf"],[1,"center"],[1,"report-table","dense","risk-report-table"],[2,"width","20%"],[2,"width","25%"],[4,"ngIf"],["class","meta-info",4,"ngIf"],[1,"center","risk-cell"],[1,"audit-question-cell"],[1,"scope-tag"],[1,"meta-info"],["colspan","7",1,"empty"],["class","finding-block detailed",4,"ngFor","ngForOf"],["class","empty-msg",4,"ngIf"],[1,"finding-block","detailed"],[1,"finding-header-report"],[1,"id-tag"],[1,"severity-badge-report"],[1,"finding-grid","combined-grid"],[1,"field","full"],[1,"field"],[1,"field","full","highlight"],[1,"empty-msg"],[1,"report-section","team-relation"],[1,"relation-box"],[1,"team-title-label"],[1,"report-table","auditor-list"],[2,"width","50%"]],template:function(i,c){i&1&&g(0,W,42,21,"div",0),i&2&&l("ngIf",c.audit())},dependencies:[V,k,w,A,R,y,T],styles:[".report-container[_ngcontent-%COMP%]{padding:2rem;background-color:#e2e8f0;min-height:100vh}.screen-controls[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto 2rem;display:flex;justify-content:space-between;align-items:center}.screen-controls[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]{color:#64748b;text-decoration:none;font-weight:500}.screen-controls[_ngcontent-%COMP%]   .back-link[_ngcontent-%COMP%]:hover{text-decoration:underline;color:#334155}.screen-controls[_ngcontent-%COMP%]   .report-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:center}.screen-controls[_ngcontent-%COMP%]   .report-actions[_ngcontent-%COMP%]   .report-tabs[_ngcontent-%COMP%]{display:flex;background:#fff;padding:4px;border-radius:8px;gap:4px}.screen-controls[_ngcontent-%COMP%]   .report-actions[_ngcontent-%COMP%]   .report-tabs[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:none;padding:8px 16px;cursor:pointer;border-radius:6px;font-weight:500;color:#64748b}.screen-controls[_ngcontent-%COMP%]   .report-actions[_ngcontent-%COMP%]   .report-tabs[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#eff6ff;color:#2563eb}.screen-controls[_ngcontent-%COMP%]   .report-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]{background-color:#2563eb;color:#fff;border:none;padding:.5rem 1rem;border-radius:6px;cursor:pointer;font-weight:600;display:flex;align-items:center;gap:.5rem}.screen-controls[_ngcontent-%COMP%]   .report-actions[_ngcontent-%COMP%]   .btn-print[_ngcontent-%COMP%]:hover{background-color:#1d4ed8}.document-page[_ngcontent-%COMP%]{background:#fff;width:210mm;min-height:297mm;margin:0 auto;padding:20mm;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;box-sizing:border-box;position:relative}.document-page.landscape[_ngcontent-%COMP%]{width:297mm}.document-page[_ngcontent-%COMP%]   .doc-header[_ngcontent-%COMP%]{border-bottom:2px solid #0f172a;padding-bottom:1rem;margin-bottom:2rem}.document-page[_ngcontent-%COMP%]   .doc-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;color:#64748b;text-transform:uppercase;margin:0}.document-page[_ngcontent-%COMP%]   .doc-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;color:#0f172a;margin:.5rem 0}.document-page[_ngcontent-%COMP%]   .doc-header[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{display:flex;gap:2rem;font-size:.9rem;color:#334155}.document-page[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{background-color:#f1f5f9;padding:.75rem;font-size:1.1rem;margin-bottom:1rem;border-left:4px solid #2563eb}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.85rem}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #cbd5e1;padding:8px;text-align:left;vertical-align:top}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8fafc;font-weight:600;color:#0f172a}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   td.center[_ngcontent-%COMP%]{text-align:center}.document-page[_ngcontent-%COMP%]   .report-table.dense[_ngcontent-%COMP%]{font-size:.75rem}.document-page[_ngcontent-%COMP%]   .report-table.dense[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .document-page[_ngcontent-%COMP%]   .report-table.dense[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:4px 6px}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   .risk-cell[_ngcontent-%COMP%]{font-weight:600}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   .risk-cell.alto[_ngcontent-%COMP%]{color:#dc2626}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   .risk-cell.medio[_ngcontent-%COMP%]{color:#d97706}.document-page[_ngcontent-%COMP%]   .report-table[_ngcontent-%COMP%]   .risk-cell.baixo[_ngcontent-%COMP%]{color:#16a34a}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]{border:1px solid #cbd5e1;margin-bottom:1.5rem;page-break-inside:avoid}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-header-report[_ngcontent-%COMP%]{background-color:#f8fafc;padding:1rem;border-bottom:1px solid #cbd5e1;display:flex;justify-content:space-between;align-items:center}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-header-report[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:#0f172a;flex:1;margin-left:1rem}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-header-report[_ngcontent-%COMP%]   .id-tag[_ngcontent-%COMP%]{font-size:.75rem;font-weight:700;color:#64748b;text-transform:uppercase}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-header-report[_ngcontent-%COMP%]   .severity-badge-report[_ngcontent-%COMP%]{font-size:.75rem;padding:2px 8px;border-radius:99px;border:1px solid;text-transform:uppercase;font-weight:600}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-header-report[_ngcontent-%COMP%]   .severity-badge-report.alta[_ngcontent-%COMP%]{background:#fef2f2;color:#dc2626;border-color:#fecaca}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-header-report[_ngcontent-%COMP%]   .severity-badge-report.media[_ngcontent-%COMP%]{background:#fffbeb;color:#d97706;border-color:#fde68a}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-header-report[_ngcontent-%COMP%]   .severity-badge-report.baixa[_ngcontent-%COMP%]{background:#f0fdf4;color:#16a34a;border-color:#bbf7d0}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-grid[_ngcontent-%COMP%]{padding:1rem;display:grid;grid-template-columns:repeat(3,1fr);gap:1rem}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-grid[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#64748b;margin-bottom:2px;text-transform:uppercase}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-grid[_ngcontent-%COMP%]   .field[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#334155;white-space:pre-wrap}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-grid[_ngcontent-%COMP%]   .field.full[_ngcontent-%COMP%]{grid-column:1/-1}.document-page[_ngcontent-%COMP%]   .finding-block[_ngcontent-%COMP%]   .finding-grid[_ngcontent-%COMP%]   .field.highlight[_ngcontent-%COMP%]{background-color:#fafafa;padding:.5rem;border-left:3px solid #64748b}.document-page[_ngcontent-%COMP%]   .doc-footer[_ngcontent-%COMP%]{margin-top:3rem;padding-top:1rem;border-top:1px solid #e2e8f0;text-align:center;color:#94a3b8;font-size:.8rem}.document-page[_ngcontent-%COMP%]   .team-relation[_ngcontent-%COMP%]{margin-top:2rem}.document-page[_ngcontent-%COMP%]   .team-relation[_ngcontent-%COMP%]   .relation-box[_ngcontent-%COMP%]{border:1px solid #cbd5e1;border-radius:4px;padding:1rem;background-color:#fafafa}.document-page[_ngcontent-%COMP%]   .team-relation[_ngcontent-%COMP%]   .relation-box[_ngcontent-%COMP%]   .team-title-label[_ngcontent-%COMP%]{margin:0 0 1rem;font-size:.95rem;color:#1e293b}.document-page[_ngcontent-%COMP%]   .team-relation[_ngcontent-%COMP%]   .relation-box[_ngcontent-%COMP%]   .auditor-list[_ngcontent-%COMP%]{margin-top:.5rem}.document-page[_ngcontent-%COMP%]   .team-relation[_ngcontent-%COMP%]   .relation-box[_ngcontent-%COMP%]   .auditor-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .document-page[_ngcontent-%COMP%]   .team-relation[_ngcontent-%COMP%]   .relation-box[_ngcontent-%COMP%]   .auditor-list[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:6px 10px}.document-page[_ngcontent-%COMP%]   .team-relation[_ngcontent-%COMP%]   .relation-box[_ngcontent-%COMP%]   .auditor-list[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f5f9}@media print{.screen-controls[_ngcontent-%COMP%]{display:none!important}.report-container[_ngcontent-%COMP%]{padding:0!important;background:#fff!important;min-height:auto!important}.document-page[_ngcontent-%COMP%]{width:100%!important;margin:0!important;padding:10mm!important;box-shadow:none!important;min-height:auto!important}.document-page.landscape[_ngcontent-%COMP%]{width:100%!important}.report-section[_ngcontent-%COMP%], .finding-block[_ngcontent-%COMP%], .relation-box[_ngcontent-%COMP%]{page-break-inside:avoid}@page{size:landscape;margin:1cm}}"]})};export{N as ReportViewer};
