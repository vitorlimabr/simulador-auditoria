import{a as O,b as o,c as T,d as P,e as k,f as D,g as w,h as q,i as A,m as G,n as I}from"./chunk-KBTVBQPD.js";import{a as V}from"./chunk-C32IP4OQ.js";import{b as S,d as F,e as N}from"./chunk-J47F7UII.js";import{$a as m,Aa as v,Ab as E,Ea as _,Ma as d,N as l,Na as i,Oa as n,Pa as c,S as g,T as h,Ta as x,Ua as p,Va as b,ab as C,ba as f,eb as y,pa as a,vb as M}from"./chunk-UZHONRYK.js";var L=()=>["/teams"];function R(s,t){if(s&1){let e=x();i(0,"div",13)(1,"div",4),c(2,"input",14),n(),i(3,"div",4),c(4,"input",15),n(),i(5,"button",16),p("click",function(){let u=g(e).index,j=b();return h(j.removeMember(u))}),m(6,"\u{1F5D1}\uFE0F"),n()()}if(s&2){let e=t.index,r=b();d("formGroupName",e),a(5),d("disabled",r.members.length===1)}}var z=class s{fb=l(G);teamService=l(V);router=l(F);route=l(S);isEditMode=f(!1);teamId=f(null);form=this.fb.group({title:["",o.required],members:this.fb.array([],o.minLength(1))});get members(){return this.form.get("members")}constructor(){this.route.paramMap.subscribe(t=>{let e=t.get("id");e?(this.isEditMode.set(!0),this.teamId.set(e),this.loadTeamData(e)):this.addMember()})}addMember(){let t=this.fb.group({id:[Math.random().toString(36).substring(2,9)],name:["",o.required],email:["",[o.required,o.email]]});this.members.push(t)}removeMember(t){this.members.length>1&&this.members.removeAt(t)}loadTeamData(t){let e=this.teamService.getTeamById(t)();e&&(this.form.patchValue({title:e.title}),e.members.forEach(r=>{this.members.push(this.fb.group({id:[r.id],name:[r.name,o.required],email:[r.email,[o.required,o.email]]}))}))}onSubmit(){if(this.form.valid){let t=this.form.value;this.isEditMode()&&this.teamId()?this.teamService.updateTeam(this.teamId(),t):this.teamService.addTeam(t),this.router.navigate(["/teams"])}}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=v({type:s,selectors:[["app-team-form"]],decls:22,vars:6,consts:[[1,"container"],[1,"header"],[1,"btn","btn-outline",3,"routerLink"],[1,"form-card",3,"ngSubmit","formGroup"],[1,"form-group"],["formControlName","title","type","text","placeholder","Ex: Equipe de Controle Interno"],[1,"members-section"],[1,"section-header"],["type","button",1,"btn-text",3,"click"],["formArrayName","members"],["class","member-row",3,"formGroupName",4,"ngFor","ngForOf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"member-row",3,"formGroupName"],["formControlName","name","type","text","placeholder","Nome do Auditor"],["formControlName","email","type","email","placeholder","E-mail"],["type","button",1,"btn-icon","text-danger",3,"click","disabled"]],template:function(e,r){e&1&&(i(0,"div",0)(1,"div",1)(2,"h1"),m(3),n(),i(4,"button",2),m(5,"Voltar"),n()(),i(6,"form",3),p("ngSubmit",function(){return r.onSubmit()}),i(7,"div",4)(8,"label"),m(9,"T\xEDtulo da Equipe"),n(),c(10,"input",5),n(),i(11,"div",6)(12,"div",7)(13,"h3"),m(14,"Auditores da Equipe"),n(),i(15,"button",8),p("click",function(){return r.addMember()}),m(16,"+ Adicionar Auditor"),n()(),i(17,"div",9),_(18,R,7,2,"div",10),n()(),i(19,"div",11)(20,"button",12),m(21,"Salvar Equipe"),n()()()()),e&2&&(a(3),C(r.isEditMode()?"Editar Equipe":"Nova Equipe"),a(),d("routerLink",y(5,L)),a(2),d("formGroup",r.form),a(12),d("ngForOf",r.members.controls),a(2),d("disabled",r.form.invalid))},dependencies:[E,M,I,k,O,T,P,A,q,D,w,N],styles:[".container[_ngcontent-%COMP%]{padding:2rem;max-width:800px;margin:0 auto}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.form-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;border:1px solid #e2e8f0;box-shadow:0 1px 3px #0000001a}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem;flex:1}label[_ngcontent-%COMP%]{display:block;font-weight:500;margin-bottom:.5rem;font-size:.9rem;color:#475569}input[_ngcontent-%COMP%]{width:100%;padding:.6rem;border:1px solid #cbd5e1;border-radius:4px;font-size:.9rem}.members-section[_ngcontent-%COMP%]{margin:2rem 0;background:#f8fafc;padding:1.5rem;border-radius:6px}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}h3[_ngcontent-%COMP%]{margin:0;font-size:1rem;color:var(--primary-color)}.member-row[_ngcontent-%COMP%]{display:flex;gap:1rem;align-items:flex-start;margin-bottom:.75rem}.btn[_ngcontent-%COMP%]{padding:.6rem 1.2rem;border-radius:4px;cursor:pointer;border:none;font-weight:500}.btn-primary[_ngcontent-%COMP%]{background:var(--secondary-color);color:#fff}.btn-outline[_ngcontent-%COMP%]{background:#fff;border:1px solid #cbd5e1;color:#475569}.btn-text[_ngcontent-%COMP%]{background:none;border:none;color:#3b82f6;cursor:pointer;font-size:.9rem}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;cursor:pointer;font-size:1.1rem;padding-top:.5rem}.text-danger[_ngcontent-%COMP%]{color:#ef4444}.form-actions[_ngcontent-%COMP%]{margin-top:2rem;display:flex;justify-content:flex-end}"]})};export{z as TeamFormComponent};
